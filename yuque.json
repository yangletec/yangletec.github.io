[
  {
    "id": 32025340,
    "slug": "ywg61e",
    "title": "dsfgsdfgsdf",
    "book_id": 11098859,
    "book": {
      "id": 11098859,
      "type": "Book",
      "slug": "tudbrp",
      "name": "博客专栏",
      "user_id": 12552073,
      "description": "分享与交流你的知识",
      "creator_id": 12552073,
      "public": 1,
      "items_count": 3,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-02-26T15:29:54.194Z",
      "updated_at": "2021-02-26T15:29:54.000Z",
      "created_at": "2021-02-26T15:04:21.000Z",
      "namespace": "aimashi-9hgym/tudbrp",
      "user": {
        "id": 12552073,
        "type": "User",
        "login": "aimashi-9hgym",
        "name": "AI码师",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 2,
        "public_books_count": 1,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2021-01-29T06:07:52.000Z",
        "updated_at": "2021-02-26T15:38:37.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 12552073,
    "creator": {
      "id": 12552073,
      "type": "User",
      "login": "aimashi-9hgym",
      "name": "AI码师",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 2,
      "public_books_count": 1,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2021-01-29T06:07:52.000Z",
      "updated_at": "2021-02-26T15:38:37.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "dsfgdfsgdsfgf<br />dsgffdsg\n",
    "body_draft": "dsfgdfsgdsfgf<br />dsgffdsg\n",
    "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B1%2C0%2C8%5D%2C%5B1%2C0%2C8%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">dsfgdfsgdsfgf</p><p data-lake-id=\"ba846b53ab5b60a85312d20473e606e1\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">dsgffdsg</p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">dsfgdfsgdsfgf</p><p data-lake-id=\"ba846b53ab5b60a85312d20473e606e1\">dsgffdsg<cursor /></p>",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\">dsfgdfsgdsfgf</p><p data-lake-id=\"ba846b53ab5b60a85312d20473e606e1\">dsgffdsg<cursor /></p>",
    "public": 1,
    "status": 1,
    "view_status": 0,
    "read_status": 1,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-02-26T15:29:54.000Z",
    "deleted_at": null,
    "created_at": "2021-02-26T15:29:44.000Z",
    "updated_at": "2021-02-26T15:29:55.000Z",
    "published_at": "2021-02-26T15:29:54.000Z",
    "first_published_at": "2021-02-26T15:29:54.000Z",
    "word_count": 2,
    "cover": "",
    "description": null,
    "custom_description": "dsfgdfsgdsfgfdsgffdsg",
    "hits": 0,
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 32025212,
    "slug": "lkehmk",
    "title": "# 测试文档自动发布fsfsfdsdf",
    "book_id": 11098859,
    "book": {
      "id": 11098859,
      "type": "Book",
      "slug": "tudbrp",
      "name": "博客专栏",
      "user_id": 12552073,
      "description": "分享与交流你的知识",
      "creator_id": 12552073,
      "public": 1,
      "items_count": 3,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-02-26T15:29:54.194Z",
      "updated_at": "2021-02-26T15:29:54.000Z",
      "created_at": "2021-02-26T15:04:21.000Z",
      "namespace": "aimashi-9hgym/tudbrp",
      "user": {
        "id": 12552073,
        "type": "User",
        "login": "aimashi-9hgym",
        "name": "AI码师",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 2,
        "public_books_count": 1,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2021-01-29T06:07:52.000Z",
        "updated_at": "2021-02-26T15:38:37.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 12552073,
    "creator": {
      "id": 12552073,
      "type": "User",
      "login": "aimashi-9hgym",
      "name": "AI码师",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 2,
      "public_books_count": 1,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2021-01-29T06:07:52.000Z",
      "updated_at": "2021-02-26T15:38:37.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "大法\n",
    "body_draft": "大法\n",
    "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B0%2C0%2C2%5D%2C%5B0%2C0%2C2%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">大法</p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"><cursor />大法</p>",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"><cursor />大法</p>",
    "public": 1,
    "status": 1,
    "view_status": 0,
    "read_status": 1,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-02-26T15:23:31.000Z",
    "deleted_at": null,
    "created_at": "2021-02-26T15:22:52.000Z",
    "updated_at": "2021-02-26T15:29:14.000Z",
    "published_at": "2021-02-26T15:29:14.000Z",
    "first_published_at": "2021-02-26T15:23:31.000Z",
    "word_count": 2,
    "cover": "",
    "description": null,
    "custom_description": "大法",
    "hits": 0,
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 32024805,
    "slug": "ny150b",
    "title": "博客第1期",
    "book_id": 11098859,
    "book": {
      "id": 11098859,
      "type": "Book",
      "slug": "tudbrp",
      "name": "博客专栏",
      "user_id": 12552073,
      "description": "分享与交流你的知识",
      "creator_id": 12552073,
      "public": 1,
      "items_count": 3,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-02-26T15:29:54.194Z",
      "updated_at": "2021-02-26T15:29:54.000Z",
      "created_at": "2021-02-26T15:04:21.000Z",
      "namespace": "aimashi-9hgym/tudbrp",
      "user": {
        "id": 12552073,
        "type": "User",
        "login": "aimashi-9hgym",
        "name": "AI码师",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 2,
        "public_books_count": 1,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2021-01-29T06:07:52.000Z",
        "updated_at": "2021-02-26T15:38:37.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 12552073,
    "creator": {
      "id": 12552073,
      "type": "User",
      "login": "aimashi-9hgym",
      "name": "AI码师",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 2,
      "public_books_count": 1,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2021-01-29T06:07:52.000Z",
      "updated_at": "2021-02-26T15:38:37.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "该博客模版案例来自 [@蚂蚁金服体验技术部](#) \n<a name=\"Cpuzj\"></a>\n### \n<a name=\"az6uF\"></a>\n### 插入带链接的标题（ctrl+K）[Best Year in Music](https://pudding.cool/projects/music-history/)\n这幅可视化作品展示了 1960 年以来，Billboard 历年榜单的前五名音乐的变化情况，效果呈现设计感十足，还可以在聆听音乐的同时回顾音乐的变迁史。<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/85075/1569743511172-7dfff3da-684a-4902-babc-cd9117fe3b7a.png#align=left&display=inline&height=648&name=image.png&originHeight=1296&originWidth=2868&size=965213&status=done&width=1434)<br />_插入图片，点击图片，设置图片大小_<br />值得一提的是，作者正是大名鼎鼎的数据新闻站点 [The Pudding](https://pudding.cool/)。作为可视化新闻媒体中的姣姣者，The Pudding 擅长对那些兼具信息量和娱乐度的争议性话题进行可视化呈现，来使得复杂的观点变得更容易被公众理解。该团队虽然仅由数名全职记者和工程师组成，但战斗力强悍，目前已有数十个大型的数据可视化作品。<br />输入作者 [@诸岳(dengfuping)](/dengfuping)<br />\n<br />\n\n<a name=\"xyPrr\"></a>\n### [Road Suffixes in the USA](https://erdavis.com/2019/07/04/road-suffixes-in-the-usa-take-2/)\n美国道路命名多种多样，例如著名的纽约第五大道（Fifth Avenue），又或者凤凰城（Phoenix）的Washington Street，Thomas Road，Union Hill Drive等。不同的道路，有不同的叫法，Avenue, Street, Road, Drive等等。想了解更多关于美国道路命名可以参考[这篇文章](http://blog.sina.com.cn/s/blog_7010d1db0101he93.html)。<br />作者用R语言统计了美国每个县的每种道路后缀（例如Avenue）的总里程，并把每个县总里程最大的道路后缀通过颜色映射到地图上。可以看出美国大部分县的道路都是以Rd(Road的缩写)结尾的。<br />![road-suffix-map.png](https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625739-f1c8b376-5632-4d08-8fcc-56142f0b0c1a.png#align=left&display=inline&height=603&name=road-suffix-map.png&originHeight=1767&originWidth=2048&size=328604&status=done&width=699)<br />_插入图片，点击图片，设置图片大小_\n\n另外还以柱状图的方式展示了每种道路后缀的总里程（英里）：<br />![road-suffix-bar.png](https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625720-b8759449-4b6a-4b11-bbc0-896fe8dca73e.png#align=left&display=inline&height=737&name=road-suffix-bar.png&originHeight=737&originWidth=890&size=23572&status=done&width=890)<br />by [@长哲(changzhe)](/changzhe)\n\n\n\n<a name=\"hduVH\"></a>\n# [「](https://zhuanlan.zhihu.com/p/83685690)[加餐」](https://zhuanlan.zhihu.com/p/83685690)[Hello World 图可视化](https://zhuanlan.zhihu.com/p/83685690)\n图可视化是信息可视化的子领域，它通过展示元素、关系，帮助用户获取数据的洞悉能力。它已被广泛地应用在流程图、社交网络、英特网、蛋白质网络等关系数据的呈现。<br />[本文](https://zhuanlan.zhihu.com/p/83685690)由 AntV 团队 [@十吾(shiwu-5wap2)](/shiwu-5wap2) 👆撰写，参考自[1][2]两篇图可视化学术论文，简要介绍图可视化的历史、背景、机遇与挑战。\n",
    "body_draft": "该博客模版案例来自 [@蚂蚁金服体验技术部](#) \n<a name=\"Cpuzj\"></a>\n### \n<a name=\"az6uF\"></a>\n### 插入带链接的标题（ctrl+K）[Best Year in Music](https://pudding.cool/projects/music-history/)\n这幅可视化作品展示了 1960 年以来，Billboard 历年榜单的前五名音乐的变化情况，效果呈现设计感十足，还可以在聆听音乐的同时回顾音乐的变迁史。<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/85075/1569743511172-7dfff3da-684a-4902-babc-cd9117fe3b7a.png#align=left&display=inline&height=648&name=image.png&originHeight=1296&originWidth=2868&size=965213&status=done&width=1434)<br />_插入图片，点击图片，设置图片大小_<br />值得一提的是，作者正是大名鼎鼎的数据新闻站点 [The Pudding](https://pudding.cool/)。作为可视化新闻媒体中的姣姣者，The Pudding 擅长对那些兼具信息量和娱乐度的争议性话题进行可视化呈现，来使得复杂的观点变得更容易被公众理解。该团队虽然仅由数名全职记者和工程师组成，但战斗力强悍，目前已有数十个大型的数据可视化作品。<br />输入作者 [@诸岳(dengfuping)](/dengfuping)<br />\n<br />\n\n<a name=\"xyPrr\"></a>\n### [Road Suffixes in the USA](https://erdavis.com/2019/07/04/road-suffixes-in-the-usa-take-2/)\n美国道路命名多种多样，例如著名的纽约第五大道（Fifth Avenue），又或者凤凰城（Phoenix）的Washington Street，Thomas Road，Union Hill Drive等。不同的道路，有不同的叫法，Avenue, Street, Road, Drive等等。想了解更多关于美国道路命名可以参考[这篇文章](http://blog.sina.com.cn/s/blog_7010d1db0101he93.html)。<br />作者用R语言统计了美国每个县的每种道路后缀（例如Avenue）的总里程，并把每个县总里程最大的道路后缀通过颜色映射到地图上。可以看出美国大部分县的道路都是以Rd(Road的缩写)结尾的。<br />![road-suffix-map.png](https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625739-f1c8b376-5632-4d08-8fcc-56142f0b0c1a.png#align=left&display=inline&height=603&name=road-suffix-map.png&originHeight=1767&originWidth=2048&size=328604&status=done&width=699)<br />_插入图片，点击图片，设置图片大小_\n\n另外还以柱状图的方式展示了每种道路后缀的总里程（英里）：<br />![road-suffix-bar.png](https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625720-b8759449-4b6a-4b11-bbc0-896fe8dca73e.png#align=left&display=inline&height=737&name=road-suffix-bar.png&originHeight=737&originWidth=890&size=23572&status=done&width=890)<br />by [@长哲(changzhe)](/changzhe)\n\n\n\n<a name=\"hduVH\"></a>\n# [「](https://zhuanlan.zhihu.com/p/83685690)[加餐」](https://zhuanlan.zhihu.com/p/83685690)[Hello World 图可视化](https://zhuanlan.zhihu.com/p/83685690)\n图可视化是信息可视化的子领域，它通过展示元素、关系，帮助用户获取数据的洞悉能力。它已被广泛地应用在流程图、社交网络、英特网、蛋白质网络等关系数据的呈现。<br />[本文](https://zhuanlan.zhihu.com/p/83685690)由 AntV 团队 [@十吾(shiwu-5wap2)](/shiwu-5wap2) 👆撰写，参考自[1][2]两篇图可视化学术论文，简要介绍图可视化的历史、背景、机遇与挑战。\n",
    "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine\" data-lake-element=\"root\" data-selection-105911=\"%7B%22path%22%3A%5B%5B2%2C0%2C0%2C0%2C0%5D%2C%5B2%2C0%2C0%2C0%2C0%5D%5D%2C%22uuid%22%3A%22105911%22%2C%22active%22%3Atrue%7D\"><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span style=\"color: #8C8C8C;\">该博客模版案例来自&nbsp;</span><span data-card-type=\"inline\" data-lake-card=\"mention\"><span class=\"lake-mention-at\">@蚂蚁金服体验技术部</span></span><span style=\"color: #8C8C8C;\">&nbsp;</span></p><h3 id=\"Cpuzj\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\"><br></h3><h3 id=\"az6uF\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\"><span style=\"color: #8C8C8C;\"><span>插入带链接的标题（ctrl+K）</span></span><a href=\"https://pudding.cool/projects/music-history/\" target=\"_blank\"><u><span>Best Year in Music</span></u></a></h3><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">这幅可视化作品展示了 1960 年以来，<span>Billboard&nbsp;</span><span>历年榜单的前五名音乐的变化情况，效果呈现设计感十足，还可以在聆听音乐的同时回顾音乐的变迁史。</span></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span data-card-type=\"inline\" data-lake-card=\"image\" class=\"\"><img data-role=\"image\" src=\"https://cdn.nlark.com/yuque/0/2019/png/85075/1569743511172-7dfff3da-684a-4902-babc-cd9117fe3b7a.png?x-oss-process=image/resize,w_2000\" data-raw-src=\"https://cdn.nlark.com/yuque/0/2019/png/85075/1569743511172-7dfff3da-684a-4902-babc-cd9117fe3b7a.png\" class=\"image lake-drag-image\" alt=\"image.png\" title=\"image.png\" style=\"visibility: visible; width: 746px; height: 337px;\"></span></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span style=\"color: #8C8C8C;\"><em><span>插入图片，点击图片，设置图片大小</span></em></span></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span>值得一提的是，作者正是大名鼎鼎的数据新闻站点&nbsp;</span><span><a href=\"https://pudding.cool/\" target=\"_blank\">The Pudding</a>。作为可视化新闻媒体中的姣姣者，</span><span>The Pudding 擅长对那些兼具信息量和娱乐度的争议性话题进行可视化呈现，来使得复杂的观点变得更容易被公众理解。该团队虽然仅由数名全职记者和工程师组成，但战斗力强悍，</span><span>目前已有</span><span>数十个大型的数据可视化作品。</span></p><p style=\"text-align: right; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span>输入作者&nbsp;<span data-card-type=\"inline\" data-lake-card=\"mention\"><a class=\"lake-mention-at\" href=\"https://www.yuque.com/dengfuping\">@诸岳(dengfuping)</a></span></span></p><p style=\"text-align: left; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p style=\"text-align: left; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 id=\"xyPrr\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\"><a href=\"https://erdavis.com/2019/07/04/road-suffixes-in-the-usa-take-2/\" target=\"_blank\"><u>Road Suffixes in the USA</u></a></h3><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">美国道路命名多种多样，例如著名的纽约第五大道（<span style=\"color: #333333;\">Fifth Avenue</span>），又或者凤凰城（Phoenix）的<span style=\"color: #323E32;\">Washington Street，</span><span style=\"color: #323E32;\">Thomas Road，</span><span style=\"color: #323E32;\">Union Hill Drive等。不同的道路，有不同的叫法，Avenue, Street, Road, Drive等等。想了解更多关于美国道路命名可以参考</span><a href=\"http://blog.sina.com.cn/s/blog_7010d1db0101he93.html\" target=\"_blank\">这篇文章</a><span style=\"color: #323E32;\">。</span></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">作者<span>用R语言</span>统计了美国每个县的每种道路后缀（例如Avenue）的总里程，并把每个县总里程最大的道路后缀通过颜色映射到地图上。可以看出美国大部分县的道路都是以Rd(Road的缩写)结尾的。</p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span data-card-type=\"inline\" data-lake-card=\"image\" class=\"\"><img data-role=\"image\" src=\"https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625739-f1c8b376-5632-4d08-8fcc-56142f0b0c1a.png?x-oss-process=image/resize,w_2000\" data-raw-src=\"https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625739-f1c8b376-5632-4d08-8fcc-56142f0b0c1a.png\" class=\"image lake-drag-image\" alt=\"road-suffix-map.png\" title=\"road-suffix-map.png\" style=\"visibility: visible; width: 699px; height: 603px;\"></span></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span style=\"color: #8C8C8C;\"><em><span>插入图片，点击图片，设置图片大小</span></em></span></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">另外还以柱状图的方式展示了每种道路后缀的总里程（英里）：</p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span data-card-type=\"inline\" data-lake-card=\"image\"><img data-role=\"image\" src=\"https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625720-b8759449-4b6a-4b11-bbc0-896fe8dca73e.png\" data-raw-src=\"https://cdn.nlark.com/yuque/0/2019/png/85075/1569743625720-b8759449-4b6a-4b11-bbc0-896fe8dca73e.png\" class=\"image lake-drag-image\" alt=\"road-suffix-bar.png\" title=\"road-suffix-bar.png\" style=\"visibility: visible; width: 746px; height: 618px;\"></span></p><p style=\"text-align: right; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span>by&nbsp;<span data-card-type=\"inline\" data-lake-card=\"mention\"><a class=\"lake-mention-at\" href=\"https://www.yuque.com/changzhe\">@长哲(changzhe)</a></span></span></p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p style=\"text-align: left; font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h1 id=\"hduVH\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 28px; line-height: 36px;\"><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><span>「</span></a><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><span>加餐」</span></a><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><u>Hello World 图可视化</u></a></h1><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">图可视化是信息可视化的子领域，它通过展示元素、关系，帮助用户获取数据的洞悉能力。它已被广泛地应用在流程图、社交网络、英特网、蛋白质网络等关系数据的呈现。</p><p style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 24px; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><u>本文</u></a>由 AntV 团队&nbsp;<span data-card-type=\"inline\" data-lake-card=\"mention\" class=\"\"><a class=\"lake-mention-at\" href=\"https://www.yuque.com/shiwu-5wap2\">@十吾(shiwu-5wap2)</a></span><span>&nbsp;👆撰写，</span>参考自[1][2]两篇图可视化学术论文，简要介绍图可视化的历史、背景、机遇与挑战。</p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><p><span style=\"color: #8C8C8C;\">该博客模版案例来自 </span><card type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22%22%2C%22name%22%3A%22%E8%9A%82%E8%9A%81%E9%87%91%E6%9C%8D%E4%BD%93%E9%AA%8C%E6%8A%80%E6%9C%AF%E9%83%A8%22%7D\"></card><span style=\"color: #8C8C8C;\"> </span></p><h3 id=\"Cpuzj\"><br /></h3><h3 id=\"az6uF\"><span style=\"color: #8C8C8C;\"><span>插入带链接的标题（ctrl+K）</span></span><a href=\"https://pudding.cool/projects/music-history/\" target=\"_blank\"><u><span>Best Year in Music</span></u></a></h3><p>这幅可视化作品展示了 1960 年以来，<span>Billboard </span><span>历年榜单的前五名音乐的变化情况，效果呈现设计感十足，还可以在聆听音乐的同时回顾音乐的变迁史。</span></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F85075%2F1569743511172-7dfff3da-684a-4902-babc-cd9117fe3b7a.png%22%2C%22originWidth%22%3A2868%2C%22originHeight%22%3A1296%2C%22name%22%3A%22image.png%22%2C%22size%22%3A965213%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A1434%2C%22height%22%3A648%7D\"></card></p><p><span style=\"color: #8C8C8C;\"><em><span>插入图片，点击图片，设置图片大小</span></em></span></p><p><span>值得一提的是，作者正是大名鼎鼎的数据新闻站点 </span><span><a href=\"https://pudding.cool/\" target=\"_blank\">The Pudding</a>。作为可视化新闻媒体中的姣姣者，</span><span>The Pudding 擅长对那些兼具信息量和娱乐度的争议性话题进行可视化呈现，来使得复杂的观点变得更容易被公众理解。该团队虽然仅由数名全职记者和工程师组成，但战斗力强悍，</span><span>目前已有</span><span>数十个大型的数据可视化作品。</span></p><p style=\"text-align: right;\"><span>输入作者 <card data-login=\"dengfuping\" data-name=\"诸岳\" type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22dengfuping%22%2C%22name%22%3A%22%E8%AF%B8%E5%B2%B3%22%7D\"></card></span></p><p style=\"text-align: left;\"><br /></p><p style=\"text-align: left;\"><br /></p><h3 id=\"xyPrr\"><a href=\"https://erdavis.com/2019/07/04/road-suffixes-in-the-usa-take-2/\" target=\"_blank\"><u>Road Suffixes in the USA</u></a></h3><p>美国道路命名多种多样，例如著名的纽约第五大道（<span style=\"color: #333333;\">Fifth Avenue</span>），又或者凤凰城（Phoenix）的<span style=\"color: #323E32;\">Washington Street，</span><span style=\"color: #323E32;\">Thomas Road，</span><span style=\"color: #323E32;\">Union Hill Drive等。不同的道路，有不同的叫法，Avenue, Street, Road, Drive等等。想了解更多关于美国道路命名可以参考</span><a href=\"http://blog.sina.com.cn/s/blog_7010d1db0101he93.html\" target=\"_blank\">这篇文章</a><span style=\"color: #323E32;\">。</span></p><p>作者<span>用R语言</span>统计了美国每个县的每种道路后缀（例如Avenue）的总里程，并把每个县总里程最大的道路后缀通过颜色映射到地图上。可以看出美国大部分县的道路都是以Rd(Road的缩写)结尾的。</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F85075%2F1569743625739-f1c8b376-5632-4d08-8fcc-56142f0b0c1a.png%22%2C%22originWidth%22%3A2048%2C%22originHeight%22%3A1767%2C%22name%22%3A%22road-suffix-map.png%22%2C%22size%22%3A328604%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A699%2C%22height%22%3A603%7D\"></card></p><p><span style=\"color: #8C8C8C;\"><em><span>插入图片，点击图片，设置图片大小</span></em></span></p><p><br /></p><p>另外还以柱状图的方式展示了每种道路后缀的总里程（英里）：</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F85075%2F1569743625720-b8759449-4b6a-4b11-bbc0-896fe8dca73e.png%22%2C%22originWidth%22%3A890%2C%22originHeight%22%3A737%2C%22name%22%3A%22road-suffix-bar.png%22%2C%22size%22%3A23572%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A890%2C%22height%22%3A737%7D\"></card></p><p style=\"text-align: right;\"><span>by <card data-login=\"changzhe\" data-name=\"长哲\" type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22changzhe%22%2C%22name%22%3A%22%E9%95%BF%E5%93%B2%22%7D\"></card></span></p><p><br /></p><p style=\"text-align: left;\"><br /></p><h1 id=\"hduVH\"><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><span>「</span></a><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><span>加餐」</span></a><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><u>Hello World 图可视化</u></a></h1><p>图可视化是信息可视化的子领域，它通过展示元素、关系，帮助用户获取数据的洞悉能力。它已被广泛地应用在流程图、社交网络、英特网、蛋白质网络等关系数据的呈现。</p><p><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><u>本文</u></a>由 AntV 团队 <card data-login=\"shiwu-5wap2\" data-name=\"十吾\" type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22shiwu-5wap2%22%2C%22name%22%3A%22%E5%8D%81%E5%90%BE%22%7D\"></card><span> 👆撰写，</span>参考自[1][2]两篇图可视化学术论文，简要介绍图可视化的历史、背景、机遇与挑战。</p>",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><p><span style=\"color: #8C8C8C;\">该博客模版案例来自 </span><card type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22%22%2C%22name%22%3A%22%E8%9A%82%E8%9A%81%E9%87%91%E6%9C%8D%E4%BD%93%E9%AA%8C%E6%8A%80%E6%9C%AF%E9%83%A8%22%7D\"></card><span style=\"color: #8C8C8C;\"> </span></p><h3 id=\"Cpuzj\"><br /></h3><h3 id=\"az6uF\"><span style=\"color: #8C8C8C;\"><span>插入带链接的标题（ctrl+K）</span></span><a href=\"https://pudding.cool/projects/music-history/\" target=\"_blank\"><u><span>Best Year in Music</span></u></a></h3><p>这幅可视化作品展示了 1960 年以来，<span>Billboard </span><span>历年榜单的前五名音乐的变化情况，效果呈现设计感十足，还可以在聆听音乐的同时回顾音乐的变迁史。</span></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F85075%2F1569743511172-7dfff3da-684a-4902-babc-cd9117fe3b7a.png%22%2C%22originWidth%22%3A2868%2C%22originHeight%22%3A1296%2C%22name%22%3A%22image.png%22%2C%22size%22%3A965213%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A1434%2C%22height%22%3A648%7D\"></card></p><p><span style=\"color: #8C8C8C;\"><em><span>插入图片，点击图片，设置图片大小</span></em></span></p><p><span>值得一提的是，作者正是大名鼎鼎的数据新闻站点 </span><span><a href=\"https://pudding.cool/\" target=\"_blank\">The Pudding</a>。作为可视化新闻媒体中的姣姣者，</span><span>The Pudding 擅长对那些兼具信息量和娱乐度的争议性话题进行可视化呈现，来使得复杂的观点变得更容易被公众理解。该团队虽然仅由数名全职记者和工程师组成，但战斗力强悍，</span><span>目前已有</span><span>数十个大型的数据可视化作品。</span></p><p style=\"text-align: right;\"><span>输入作者 <card data-login=\"dengfuping\" data-name=\"诸岳\" type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22dengfuping%22%2C%22name%22%3A%22%E8%AF%B8%E5%B2%B3%22%7D\"></card></span></p><p style=\"text-align: left;\"><br /></p><p style=\"text-align: left;\"><br /></p><h3 id=\"xyPrr\"><a href=\"https://erdavis.com/2019/07/04/road-suffixes-in-the-usa-take-2/\" target=\"_blank\"><u>Road Suffixes in the USA</u></a></h3><p>美国道路命名多种多样，例如著名的纽约第五大道（<span style=\"color: #333333;\">Fifth Avenue</span>），又或者凤凰城（Phoenix）的<span style=\"color: #323E32;\">Washington Street，</span><span style=\"color: #323E32;\">Thomas Road，</span><span style=\"color: #323E32;\">Union Hill Drive等。不同的道路，有不同的叫法，Avenue, Street, Road, Drive等等。想了解更多关于美国道路命名可以参考</span><a href=\"http://blog.sina.com.cn/s/blog_7010d1db0101he93.html\" target=\"_blank\">这篇文章</a><span style=\"color: #323E32;\">。</span></p><p>作者<span>用R语言</span>统计了美国每个县的每种道路后缀（例如Avenue）的总里程，并把每个县总里程最大的道路后缀通过颜色映射到地图上。可以看出美国大部分县的道路都是以Rd(Road的缩写)结尾的。</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F85075%2F1569743625739-f1c8b376-5632-4d08-8fcc-56142f0b0c1a.png%22%2C%22originWidth%22%3A2048%2C%22originHeight%22%3A1767%2C%22name%22%3A%22road-suffix-map.png%22%2C%22size%22%3A328604%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A699%2C%22height%22%3A603%7D\"></card></p><p><span style=\"color: #8C8C8C;\"><em><span>插入图片，点击图片，设置图片大小</span></em></span></p><p><br /></p><p>另外还以柱状图的方式展示了每种道路后缀的总里程（英里）：</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F85075%2F1569743625720-b8759449-4b6a-4b11-bbc0-896fe8dca73e.png%22%2C%22originWidth%22%3A890%2C%22originHeight%22%3A737%2C%22name%22%3A%22road-suffix-bar.png%22%2C%22size%22%3A23572%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22search%22%3A%22%22%2C%22width%22%3A890%2C%22height%22%3A737%7D\"></card></p><p style=\"text-align: right;\"><span>by <card data-login=\"changzhe\" data-name=\"长哲\" type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22changzhe%22%2C%22name%22%3A%22%E9%95%BF%E5%93%B2%22%7D\"></card></span></p><p><br /></p><p style=\"text-align: left;\"><br /></p><h1 id=\"hduVH\"><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><span>「</span></a><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><span>加餐」</span></a><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><u>Hello World 图可视化</u></a></h1><p>图可视化是信息可视化的子领域，它通过展示元素、关系，帮助用户获取数据的洞悉能力。它已被广泛地应用在流程图、社交网络、英特网、蛋白质网络等关系数据的呈现。</p><p><a href=\"https://zhuanlan.zhihu.com/p/83685690\" target=\"_blank\"><u>本文</u></a>由 AntV 团队 <card data-login=\"shiwu-5wap2\" data-name=\"十吾\" type=\"inline\" name=\"mention\" value=\"data:%7B%22login%22%3A%22shiwu-5wap2%22%2C%22name%22%3A%22%E5%8D%81%E5%90%BE%22%7D\"></card><span> 👆撰写，</span>参考自[1][2]两篇图可视化学术论文，简要介绍图可视化的历史、背景、机遇与挑战。</p>",
    "public": 1,
    "status": 1,
    "view_status": 0,
    "read_status": 1,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-02-26T15:04:21.000Z",
    "deleted_at": null,
    "created_at": "2021-02-26T15:04:21.000Z",
    "updated_at": "2021-02-26T15:04:21.000Z",
    "published_at": "2021-02-26T15:04:21.000Z",
    "first_published_at": "2021-02-26T15:04:21.000Z",
    "word_count": 0,
    "cover": "https://cdn.nlark.com/yuque/0/2019/png/105911/1570527117308-c7131366-f7d1-49de-b874-ddf2384e3937.png",
    "description": null,
    "custom_description": null,
    "hits": 0,
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 32025782,
    "slug": "bca9og",
    "title": "第一篇博客",
    "book_id": 11098859,
    "book": {
      "id": 11098859,
      "type": "Book",
      "slug": "tudbrp",
      "name": "博客专栏",
      "user_id": 12552073,
      "description": "分享与交流你的知识",
      "creator_id": 12552073,
      "public": 1,
      "items_count": 4,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-02-26T15:55:50.797Z",
      "updated_at": "2021-02-26T15:55:50.000Z",
      "created_at": "2021-02-26T15:04:21.000Z",
      "namespace": "aimashi-9hgym/tudbrp",
      "user": {
        "id": 12552073,
        "type": "User",
        "login": "aimashi-9hgym",
        "name": "AI码师",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 2,
        "public_books_count": 1,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2021-01-29T06:07:52.000Z",
        "updated_at": "2021-02-26T15:38:37.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 12552073,
    "creator": {
      "id": 12552073,
      "type": "User",
      "login": "aimashi-9hgym",
      "name": "AI码师",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 2,
      "public_books_count": 1,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2021-01-29T06:07:52.000Z",
      "updated_at": "2021-02-26T15:38:37.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "<a name=\"3c80ac49\"></a>\n### Spring Cloud Gateway\n\n<br />Pig 2.0 采用的是spring官方的网关组件，通过异步背压的高性能网关。<br />路由配置是整个微服务中最为核心的功能<br />\n\n<a name=\"57e915ea\"></a>\n### 配置路由\n\n<br />我们以UPMS 的路由为例子，注意注释<br />\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      routes:\n      #UPMS 模块\n      - id: pig-upms      # 唯一的服务ID\n        uri: lb://pig-upms # 注册中心的服务名称，实现负载均衡\n        predicates:\n        - Path=/admin/**  #所有业务的请求前缀\n        filters:\n          # 限流配置\n        - name: RequestRateLimiter    #限流策略           args:\n            key-resolver: '#{@remoteAddrKeyResolver}'\n            redis-rate-limiter.replenishRate: 10\n            redis-rate-limiter.burstCapacity: 20\n```\n\n\n<a name=\"b52baf4b\"></a>\n### pig 默认提供了全局的路由过滤器原理\n\n<br />PigRequestGlobalFilter,对全部的微服务提供了安全过滤（这个后边会讲）和全局StripPrefix=1配置，**意味着你在使用Pig的时候，网关转发到业务模块时候会自动截取前缀，不用再每个微服务路由配置了StripPrefixFilter**<br />\n\n```java\npublic class PigRequestGlobalFilter implements GlobalFilter, Ordered {\n\tprivate static final String HEADER_NAME = \"X-Forwarded-Prefix\";\n\n\t@Override\n\tpublic Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n\t\t// 1. 清洗请求头中from 参数\n\t\tServerHttpRequest request = exchange.getRequest().mutate()\n\t\t\t.headers(httpHeaders -> httpHeaders.remove(SecurityConstants.FROM))\n\t\t\t.build();\n\n\t\t// 2. 重写StripPrefix\n\t\taddOriginalRequestUrl(exchange, request.getURI());\n\t\tString rawPath = request.getURI().getRawPath();\n\t\tString newPath = \"/\" + Arrays.stream(StringUtils.tokenizeToStringArray(rawPath, \"/\"))\n\t\t\t.skip(1L).collect(Collectors.joining(\"/\"));\n\t\tServerHttpRequest newRequest = request.mutate()\n\t\t\t.path(newPath)\n\t\t\t.build();\n\t\texchange.getAttributes().put(GATEWAY_REQUEST_URL_ATTR, newRequest.getURI());\n\n\t\treturn chain.filter(exchange.mutate()\n\t\t\t.request(newRequest.mutate()\n\t\t\t\t.build()).build());\n\t}\n\n\t@Override\n\tpublic int getOrder() {\n\t\treturn -1000;\n\t}\n}\n```\n",
    "body_draft": "<a name=\"3c80ac49\"></a>\n### Spring Cloud Gateway\n\n<br />Pig 2.0 采用的是spring官方的网关组件，通过异步背压的高性能网关。<br />路由配置是整个微服务中最为核心的功能<br />\n\n<a name=\"57e915ea\"></a>\n### 配置路由\n\n<br />我们以UPMS 的路由为例子，注意注释<br />\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      routes:\n      #UPMS 模块\n      - id: pig-upms      # 唯一的服务ID\n        uri: lb://pig-upms # 注册中心的服务名称，实现负载均衡\n        predicates:\n        - Path=/admin/**  #所有业务的请求前缀\n        filters:\n          # 限流配置\n        - name: RequestRateLimiter    #限流策略           args:\n            key-resolver: '#{@remoteAddrKeyResolver}'\n            redis-rate-limiter.replenishRate: 10\n            redis-rate-limiter.burstCapacity: 20\n```\n\n\n<a name=\"b52baf4b\"></a>\n### pig 默认提供了全局的路由过滤器原理\n\n<br />PigRequestGlobalFilter,对全部的微服务提供了安全过滤（这个后边会讲）和全局StripPrefix=1配置，**意味着你在使用Pig的时候，网关转发到业务模块时候会自动截取前缀，不用再每个微服务路由配置了StripPrefixFilter**<br />\n\n```java\npublic class PigRequestGlobalFilter implements GlobalFilter, Ordered {\n\tprivate static final String HEADER_NAME = \"X-Forwarded-Prefix\";\n\n\t@Override\n\tpublic Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n\t\t// 1. 清洗请求头中from 参数\n\t\tServerHttpRequest request = exchange.getRequest().mutate()\n\t\t\t.headers(httpHeaders -> httpHeaders.remove(SecurityConstants.FROM))\n\t\t\t.build();\n\n\t\t// 2. 重写StripPrefix\n\t\taddOriginalRequestUrl(exchange, request.getURI());\n\t\tString rawPath = request.getURI().getRawPath();\n\t\tString newPath = \"/\" + Arrays.stream(StringUtils.tokenizeToStringArray(rawPath, \"/\"))\n\t\t\t.skip(1L).collect(Collectors.joining(\"/\"));\n\t\tServerHttpRequest newRequest = request.mutate()\n\t\t\t.path(newPath)\n\t\t\t.build();\n\t\texchange.getAttributes().put(GATEWAY_REQUEST_URL_ATTR, newRequest.getURI());\n\n\t\treturn chain.filter(exchange.mutate()\n\t\t\t.request(newRequest.mutate()\n\t\t\t\t.build()).build());\n\t}\n\n\t@Override\n\tpublic int getOrder() {\n\t\treturn -1000;\n\t}\n}\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B16%5D%2C%5B16%5D%5D%2C%22active%22%3Atrue%7D\"><h3 id=\"3c80ac49\" data-lake-id=\"050e001293cea7d543cd715a09d574f8\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">Spring Cloud Gateway</h3><p data-lake-id=\"9618fa30a03ae0677a1ebe6c2edd45eb\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"ebdcc653cfbe3f8189ba609862170021\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">Pig 2.0 采用的是spring官方的网关组件，通过异步背压的高性能网关。</p><p data-lake-id=\"35c32dee1c609d325beefec191999fff\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">路由配置是整个微服务中最为核心的功能</p><p data-lake-id=\"b185a7d3f10e3d8120785d467c164fac\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 id=\"57e915ea\" data-lake-id=\"edce31b8896833e1c842187f65fb6ea8\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">配置路由</h3><p data-lake-id=\"c8e84556a97db3cf17fa72a340235198\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"94066f6ce1fcb0f42114042bcf282867\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">我们以UPMS 的路由为例子，注意注释</p><p data-lake-id=\"30bbe225389bb4a84a1362d69c9c2763\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"a390ea0c\" data-language=\"yaml\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">spring</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">:</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">  cloud</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">:</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    gateway</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">:</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">      routes</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">:</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">      <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">#UPMS 模块</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">      - </span><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">id</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">: </span>pig-upms      <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"># 唯一的服务ID</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        uri</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">: </span>lb<span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">:</span>//pig-upms <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"># 注册中心的服务名称，实现负载均衡</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        predicates</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">:</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        - </span>Path=/admin/**  <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">#所有业务的请求前缀</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        filters</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">:</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">          <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"># 限流配置</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        - </span><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">name</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">: </span>RequestRateLimiter    <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">#限流策略           args:</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            key-resolver</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">: </span><span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">'#{@remoteAddrKeyResolver}'</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            redis-rate-limiter.replenishRate</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">: </span><span class=\"cm-number\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">10</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-atom\" style=\"color: rgb(153, 0, 85); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            redis-rate-limiter.burstCapacity</span><span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">: </span><span class=\"cm-number\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">20</span></span></span></pre></div></div></div><p data-lake-id=\"a3ad0584470d7ef7d91761df937da0f3\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><h3 id=\"b52baf4b\" data-lake-id=\"39c650ce6f3e737336bae7b7650201f5\" style=\"padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 20px; line-height: 28px;\">pig 默认提供了全局的路由过滤器原理</h3><p data-lake-id=\"794efa8ca086c760c1d02cbb9b102d18\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><p data-lake-id=\"289493242eb27822a59c099048093f90\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">PigRequestGlobalFilter,对全部的微服务提供了安全过滤（这个后边会讲）和全局StripPrefix=1配置，<strong>意味着你在使用Pig的时候，网关转发到业务模块时候会自动截取前缀，不用再每个微服务路由配置了StripPrefixFilter</strong></p><p data-lake-id=\"934929df6398f5bca80d010987ec4640\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><br></p><div data-card-type=\"block\" data-lake-card=\"codeblock\" id=\"15fe2f62\" data-language=\"java\"><div class=\"lake-codeblock-content\" style=\"border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);\"><div class=\"CodeMirror-sizer\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><pre class=\"cm-s-default\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">public</span> <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">class</span> <span class=\"cm-def\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">PigRequestGlobalFilter</span> <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">implements</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">GlobalFilter</span>, <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">Ordered</span> {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">private</span> <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">static</span> <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">final</span> <span class=\"cm-type\" style=\"color: rgb(34, 134, 58); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">String</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">HEADER_NAME</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"X-Forwarded-Prefix\"</span>;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">@Override</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">public</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">Mono</span><span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">&lt;</span><span class=\"cm-type\" style=\"color: rgb(34, 134, 58); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">Void</span><span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">&gt;</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">filter</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">ServerWebExchange</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">exchange</span>, <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">GatewayFilterChain</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">chain</span>) {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">// 1. 清洗请求头中from 参数</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">ServerHttpRequest</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">request</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">exchange</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">getRequest</span>().<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">mutate</span>()\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            .<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">headers</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">httpHeaders</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">-&gt;</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">httpHeaders</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">remove</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">SecurityConstants</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">FROM</span>))\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-1\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            .<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">build</span>();\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-comment\" style=\"color: rgb(106, 115, 125); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">// 2. 重写StripPrefix</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">addOriginalRequestUrl</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">exchange</span>, <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">request</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">getURI</span>());\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-type\" style=\"color: rgb(34, 134, 58); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">String</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">rawPath</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">request</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">getURI</span>().<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">getRawPath</span>();\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-type\" style=\"color: rgb(34, 134, 58); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">String</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">newPath</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"/\"</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">+</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">Arrays</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">stream</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">StringUtils</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">tokenizeToStringArray</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">rawPath</span>, <span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"/\"</span>))\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            .<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">skip</span>(<span class=\"cm-number\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">1L</span>).<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">collect</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">Collectors</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">joining</span>(<span class=\"cm-string\" style=\"color: rgb(102, 153, 0); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\"/\"</span>));\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">ServerHttpRequest</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">newRequest</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">=</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">request</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">mutate</span>()\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            .<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">path</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">newPath</span>)\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            .<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">build</span>();\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">exchange</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">getAttributes</span>().<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">put</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">GATEWAY_REQUEST_URL_ATTR</span>, <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">newRequest</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">getURI</span>());\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">return</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">chain</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">filter</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">exchange</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">mutate</span>()\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">            .<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">request</span>(<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">newRequest</span>.<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">mutate</span>()\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">                .<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">build</span>()).<span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">build</span>());\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    }\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-meta\" style=\"color: rgb(31, 127, 154); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">@Override</span>\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">public</span> <span class=\"cm-type\" style=\"color: rgb(34, 134, 58); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">int</span> <span class=\"cm-variable\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">getOrder</span>() {\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">        <span class=\"cm-keyword\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">return</span> <span class=\"cm-operator\" style=\"color: rgb(215, 58, 73); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">-</span><span class=\"cm-number\" style=\"color: rgb(0, 92, 197); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">1000</span>;\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">    }\n</span></span><span class=\"lake-preview-line\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"><span class=\"lake-preview-line-number lake-lm-pad-level-0\" style=\"color: rgb(191, 191, 191); margin: 0px 8px 0px 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\"></span><span class=\"lake-preview-codeblock-content\" style=\"color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);\">}</span></span></pre></div></div></div></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><h3 id=\"3c80ac49\" data-lake-id=\"050e001293cea7d543cd715a09d574f8\">Spring Cloud Gateway</h3><p data-lake-id=\"9618fa30a03ae0677a1ebe6c2edd45eb\"><br /></p><p data-lake-id=\"ebdcc653cfbe3f8189ba609862170021\">Pig 2.0 采用的是spring官方的网关组件，通过异步背压的高性能网关。</p><p data-lake-id=\"35c32dee1c609d325beefec191999fff\">路由配置是整个微服务中最为核心的功能</p><p data-lake-id=\"b185a7d3f10e3d8120785d467c164fac\"><br /></p><h3 id=\"57e915ea\" data-lake-id=\"edce31b8896833e1c842187f65fb6ea8\">配置路由</h3><p data-lake-id=\"c8e84556a97db3cf17fa72a340235198\"><br /></p><p data-lake-id=\"94066f6ce1fcb0f42114042bcf282867\">我们以UPMS 的路由为例子，注意注释</p><p data-lake-id=\"30bbe225389bb4a84a1362d69c9c2763\"><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22id%22%3A%22a390ea0c%22%2C%22code%22%3A%22spring%3A%5Cn%20%20cloud%3A%5Cn%20%20%20%20gateway%3A%5Cn%20%20%20%20%20%20routes%3A%5Cn%20%20%20%20%20%20%23UPMS%20%E6%A8%A1%E5%9D%97%5Cn%20%20%20%20%20%20-%20id%3A%20pig-upms%20%20%20%20%20%20%23%20%E5%94%AF%E4%B8%80%E7%9A%84%E6%9C%8D%E5%8A%A1ID%5Cn%20%20%20%20%20%20%20%20uri%3A%20lb%3A%2F%2Fpig-upms%20%23%20%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%90%8D%E7%A7%B0%EF%BC%8C%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%5Cn%20%20%20%20%20%20%20%20predicates%3A%5Cn%20%20%20%20%20%20%20%20-%20Path%3D%2Fadmin%2F**%20%20%23%E6%89%80%E6%9C%89%E4%B8%9A%E5%8A%A1%E7%9A%84%E8%AF%B7%E6%B1%82%E5%89%8D%E7%BC%80%5Cn%20%20%20%20%20%20%20%20filters%3A%5Cn%20%20%20%20%20%20%20%20%20%20%23%20%E9%99%90%E6%B5%81%E9%85%8D%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20-%20name%3A%20RequestRateLimiter%20%20%20%20%23%E9%99%90%E6%B5%81%E7%AD%96%E7%95%A5%20%20%20%20%20%20%20%20%20%20%20args%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20key-resolver%3A%20'%23%7B%40remoteAddrKeyResolver%7D'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20redis-rate-limiter.replenishRate%3A%2010%5Cn%20%20%20%20%20%20%20%20%20%20%20%20redis-rate-limiter.burstCapacity%3A%2020%22%2C%22mode%22%3A%22yaml%22%7D\"></card><p data-lake-id=\"a3ad0584470d7ef7d91761df937da0f3\"><br /></p><h3 id=\"b52baf4b\" data-lake-id=\"39c650ce6f3e737336bae7b7650201f5\">pig 默认提供了全局的路由过滤器原理</h3><p data-lake-id=\"794efa8ca086c760c1d02cbb9b102d18\"><br /></p><p data-lake-id=\"289493242eb27822a59c099048093f90\">PigRequestGlobalFilter,对全部的微服务提供了安全过滤（这个后边会讲）和全局StripPrefix=1配置，<strong>意味着你在使用Pig的时候，网关转发到业务模块时候会自动截取前缀，不用再每个微服务路由配置了StripPrefixFilter</strong></p><p data-lake-id=\"934929df6398f5bca80d010987ec4640\"><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22id%22%3A%2215fe2f62%22%2C%22code%22%3A%22public%20class%20PigRequestGlobalFilter%20implements%20GlobalFilter%2C%20Ordered%20%7B%5Cn%5Ctprivate%20static%20final%20String%20HEADER_NAME%20%3D%20%5C%22X-Forwarded-Prefix%5C%22%3B%5Cn%5Cn%5Ct%40Override%5Cn%5Ctpublic%20Mono%3CVoid%3E%20filter(ServerWebExchange%20exchange%2C%20GatewayFilterChain%20chain)%20%7B%5Cn%5Ct%5Ct%2F%2F%201.%20%E6%B8%85%E6%B4%97%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%B8%ADfrom%20%E5%8F%82%E6%95%B0%5Cn%5Ct%5CtServerHttpRequest%20request%20%3D%20exchange.getRequest().mutate()%5Cn%5Ct%5Ct%5Ct.headers(httpHeaders%20-%3E%20httpHeaders.remove(SecurityConstants.FROM))%5Cn%5Ct%5Ct%5Ct.build()%3B%5Cn%5Cn%5Ct%5Ct%2F%2F%202.%20%E9%87%8D%E5%86%99StripPrefix%5Cn%5Ct%5CtaddOriginalRequestUrl(exchange%2C%20request.getURI())%3B%5Cn%5Ct%5CtString%20rawPath%20%3D%20request.getURI().getRawPath()%3B%5Cn%5Ct%5CtString%20newPath%20%3D%20%5C%22%2F%5C%22%20%2B%20Arrays.stream(StringUtils.tokenizeToStringArray(rawPath%2C%20%5C%22%2F%5C%22))%5Cn%5Ct%5Ct%5Ct.skip(1L).collect(Collectors.joining(%5C%22%2F%5C%22))%3B%5Cn%5Ct%5CtServerHttpRequest%20newRequest%20%3D%20request.mutate()%5Cn%5Ct%5Ct%5Ct.path(newPath)%5Cn%5Ct%5Ct%5Ct.build()%3B%5Cn%5Ct%5Ctexchange.getAttributes().put(GATEWAY_REQUEST_URL_ATTR%2C%20newRequest.getURI())%3B%5Cn%5Cn%5Ct%5Ctreturn%20chain.filter(exchange.mutate()%5Cn%5Ct%5Ct%5Ct.request(newRequest.mutate()%5Cn%5Ct%5Ct%5Ct%5Ct.build()).build())%3B%5Cn%5Ct%7D%5Cn%5Cn%5Ct%40Override%5Cn%5Ctpublic%20int%20getOrder()%20%7B%5Cn%5Ct%5Ctreturn%20-1000%3B%5Cn%5Ct%7D%5Cn%7D%22%2C%22mode%22%3A%22java%22%7D\"></card><cursor />",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><h3 id=\"3c80ac49\" data-lake-id=\"050e001293cea7d543cd715a09d574f8\">Spring Cloud Gateway</h3><p data-lake-id=\"9618fa30a03ae0677a1ebe6c2edd45eb\"><br /></p><p data-lake-id=\"ebdcc653cfbe3f8189ba609862170021\">Pig 2.0 采用的是spring官方的网关组件，通过异步背压的高性能网关。</p><p data-lake-id=\"35c32dee1c609d325beefec191999fff\">路由配置是整个微服务中最为核心的功能</p><p data-lake-id=\"b185a7d3f10e3d8120785d467c164fac\"><br /></p><h3 id=\"57e915ea\" data-lake-id=\"edce31b8896833e1c842187f65fb6ea8\">配置路由</h3><p data-lake-id=\"c8e84556a97db3cf17fa72a340235198\"><br /></p><p data-lake-id=\"94066f6ce1fcb0f42114042bcf282867\">我们以UPMS 的路由为例子，注意注释</p><p data-lake-id=\"30bbe225389bb4a84a1362d69c9c2763\"><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22id%22%3A%22a390ea0c%22%2C%22code%22%3A%22spring%3A%5Cn%20%20cloud%3A%5Cn%20%20%20%20gateway%3A%5Cn%20%20%20%20%20%20routes%3A%5Cn%20%20%20%20%20%20%23UPMS%20%E6%A8%A1%E5%9D%97%5Cn%20%20%20%20%20%20-%20id%3A%20pig-upms%20%20%20%20%20%20%23%20%E5%94%AF%E4%B8%80%E7%9A%84%E6%9C%8D%E5%8A%A1ID%5Cn%20%20%20%20%20%20%20%20uri%3A%20lb%3A%2F%2Fpig-upms%20%23%20%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%90%8D%E7%A7%B0%EF%BC%8C%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%5Cn%20%20%20%20%20%20%20%20predicates%3A%5Cn%20%20%20%20%20%20%20%20-%20Path%3D%2Fadmin%2F**%20%20%23%E6%89%80%E6%9C%89%E4%B8%9A%E5%8A%A1%E7%9A%84%E8%AF%B7%E6%B1%82%E5%89%8D%E7%BC%80%5Cn%20%20%20%20%20%20%20%20filters%3A%5Cn%20%20%20%20%20%20%20%20%20%20%23%20%E9%99%90%E6%B5%81%E9%85%8D%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20-%20name%3A%20RequestRateLimiter%20%20%20%20%23%E9%99%90%E6%B5%81%E7%AD%96%E7%95%A5%20%20%20%20%20%20%20%20%20%20%20args%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20key-resolver%3A%20'%23%7B%40remoteAddrKeyResolver%7D'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20redis-rate-limiter.replenishRate%3A%2010%5Cn%20%20%20%20%20%20%20%20%20%20%20%20redis-rate-limiter.burstCapacity%3A%2020%22%2C%22mode%22%3A%22yaml%22%7D\"></card><p data-lake-id=\"a3ad0584470d7ef7d91761df937da0f3\"><br /></p><h3 id=\"b52baf4b\" data-lake-id=\"39c650ce6f3e737336bae7b7650201f5\">pig 默认提供了全局的路由过滤器原理</h3><p data-lake-id=\"794efa8ca086c760c1d02cbb9b102d18\"><br /></p><p data-lake-id=\"289493242eb27822a59c099048093f90\">PigRequestGlobalFilter,对全部的微服务提供了安全过滤（这个后边会讲）和全局StripPrefix=1配置，<strong>意味着你在使用Pig的时候，网关转发到业务模块时候会自动截取前缀，不用再每个微服务路由配置了StripPrefixFilter</strong></p><p data-lake-id=\"934929df6398f5bca80d010987ec4640\"><br /></p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22id%22%3A%2215fe2f62%22%2C%22code%22%3A%22public%20class%20PigRequestGlobalFilter%20implements%20GlobalFilter%2C%20Ordered%20%7B%5Cn%5Ctprivate%20static%20final%20String%20HEADER_NAME%20%3D%20%5C%22X-Forwarded-Prefix%5C%22%3B%5Cn%5Cn%5Ct%40Override%5Cn%5Ctpublic%20Mono%3CVoid%3E%20filter(ServerWebExchange%20exchange%2C%20GatewayFilterChain%20chain)%20%7B%5Cn%5Ct%5Ct%2F%2F%201.%20%E6%B8%85%E6%B4%97%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%B8%ADfrom%20%E5%8F%82%E6%95%B0%5Cn%5Ct%5CtServerHttpRequest%20request%20%3D%20exchange.getRequest().mutate()%5Cn%5Ct%5Ct%5Ct.headers(httpHeaders%20-%3E%20httpHeaders.remove(SecurityConstants.FROM))%5Cn%5Ct%5Ct%5Ct.build()%3B%5Cn%5Cn%5Ct%5Ct%2F%2F%202.%20%E9%87%8D%E5%86%99StripPrefix%5Cn%5Ct%5CtaddOriginalRequestUrl(exchange%2C%20request.getURI())%3B%5Cn%5Ct%5CtString%20rawPath%20%3D%20request.getURI().getRawPath()%3B%5Cn%5Ct%5CtString%20newPath%20%3D%20%5C%22%2F%5C%22%20%2B%20Arrays.stream(StringUtils.tokenizeToStringArray(rawPath%2C%20%5C%22%2F%5C%22))%5Cn%5Ct%5Ct%5Ct.skip(1L).collect(Collectors.joining(%5C%22%2F%5C%22))%3B%5Cn%5Ct%5CtServerHttpRequest%20newRequest%20%3D%20request.mutate()%5Cn%5Ct%5Ct%5Ct.path(newPath)%5Cn%5Ct%5Ct%5Ct.build()%3B%5Cn%5Ct%5Ctexchange.getAttributes().put(GATEWAY_REQUEST_URL_ATTR%2C%20newRequest.getURI())%3B%5Cn%5Cn%5Ct%5Ctreturn%20chain.filter(exchange.mutate()%5Cn%5Ct%5Ct%5Ct.request(newRequest.mutate()%5Cn%5Ct%5Ct%5Ct%5Ct.build()).build())%3B%5Cn%5Ct%7D%5Cn%5Cn%5Ct%40Override%5Cn%5Ctpublic%20int%20getOrder()%20%7B%5Cn%5Ct%5Ctreturn%20-1000%3B%5Cn%5Ct%7D%5Cn%7D%22%2C%22mode%22%3A%22java%22%7D\"></card><cursor />",
    "public": 1,
    "status": 1,
    "view_status": 0,
    "read_status": 1,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-02-26T15:55:50.000Z",
    "deleted_at": null,
    "created_at": "2021-02-26T15:55:31.000Z",
    "updated_at": "2021-02-26T15:55:52.000Z",
    "published_at": "2021-02-26T15:55:50.000Z",
    "first_published_at": "2021-02-26T15:55:50.000Z",
    "word_count": 423,
    "cover": "",
    "description": null,
    "custom_description": "Spring Cloud GatewayPig 2.0 采用的是spring官方的网关组件，通过异步背压的高性能网关。路由配置是整个微服务中最为核心的功能配置路由我们以UPMS 的路由为例子，注意注释spring:   cloud:     gateway:       routes:    ...",
    "hits": 0,
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 32025933,
    "slug": "yefev6",
    "title": "测试标签和分类",
    "book_id": 11098859,
    "book": {
      "id": 11098859,
      "type": "Book",
      "slug": "tudbrp",
      "name": "博客专栏",
      "user_id": 12552073,
      "description": "分享与交流你的知识",
      "creator_id": 12552073,
      "public": 1,
      "items_count": 5,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2021-02-26T16:10:36.317Z",
      "updated_at": "2021-02-26T16:10:36.000Z",
      "created_at": "2021-02-26T15:04:21.000Z",
      "namespace": "aimashi-9hgym/tudbrp",
      "user": {
        "id": 12552073,
        "type": "User",
        "login": "aimashi-9hgym",
        "name": "AI码师",
        "description": null,
        "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
        "books_count": 2,
        "public_books_count": 1,
        "followers_count": 0,
        "following_count": 0,
        "created_at": "2021-01-29T06:07:52.000Z",
        "updated_at": "2021-02-26T15:38:37.000Z",
        "_serializer": "v2.user"
      },
      "_serializer": "v2.book"
    },
    "user_id": 12552073,
    "creator": {
      "id": 12552073,
      "type": "User",
      "login": "aimashi-9hgym",
      "name": "AI码师",
      "description": null,
      "avatar_url": "https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",
      "books_count": 2,
      "public_books_count": 1,
      "followers_count": 0,
      "following_count": 0,
      "created_at": "2021-01-29T06:07:52.000Z",
      "updated_at": "2021-02-26T15:38:37.000Z",
      "_serializer": "v2.user"
    },
    "format": "lake",
    "body": "tags: [Hexo]<br />categories: 教程<br />date: 2018-10-05 10:43:50\n\n---\n\n撒打算大时代撒打算大\n",
    "body_draft": "tags: [Hexo]<br />categories: 教程<br />date: 2018-10-05 10:43:50\n\n---\n\n撒打算大时代撒打算大\n",
    "body_html": "<!doctype html><div class=\"lake-content-editor-core lake-engine lake-typography-traditional\" data-lake-element=\"root\" data-selection-undefined=\"%7B%22path%22%3A%5B%5B4%2C0%2C10%5D%2C%5B4%2C0%2C10%5D%5D%2C%22active%22%3Atrue%7D\"><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span>tags: [Hexo]</span></p><p data-lake-id=\"a5ee7cd7ac7fc9801057b3f6c4a2365f\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span style=\"color: #BFBFBF;\"></span><span>categories: 教程</span></p><p data-lake-id=\"807fb13e78e86ffe7cb6b2ec6193df80\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\"><span style=\"color: #BFBFBF;\"></span><span>date: 2018-10-05 10:43:50</span></p><div data-card-type=\"block\" data-lake-card=\"hr\"><hr style=\"background-color: rgb(232, 232, 232); border: 1px solid transparent; margin: 18px 0px;\"></div><p data-lake-id=\"74c840e7cdba24da6c6084b152d53d13\" style=\"font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\">撒打算大时代撒打算大</p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"><span>tags: [Hexo]</span></p><p data-lake-id=\"a5ee7cd7ac7fc9801057b3f6c4a2365f\"><span style=\"color: #BFBFBF;\"></span><span>categories: 教程</span></p><p data-lake-id=\"807fb13e78e86ffe7cb6b2ec6193df80\"><span style=\"color: #BFBFBF;\"></span><span>date: 2018-10-05 10:43:50</span></p><card type=\"block\" name=\"hr\"></card><p data-lake-id=\"74c840e7cdba24da6c6084b152d53d13\">撒打算大时代撒打算大<cursor /></p>",
    "body_draft_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"traditional\" /><p data-lake-id=\"a20d224c568e48b9d67847a2c66a8c01_p_0\"><span>tags: [Hexo]</span></p><p data-lake-id=\"a5ee7cd7ac7fc9801057b3f6c4a2365f\"><span style=\"color: #BFBFBF;\"></span><span>categories: 教程</span></p><p data-lake-id=\"807fb13e78e86ffe7cb6b2ec6193df80\"><span style=\"color: #BFBFBF;\"></span><span>date: 2018-10-05 10:43:50</span></p><card type=\"block\" name=\"hr\"></card><p data-lake-id=\"74c840e7cdba24da6c6084b152d53d13\">撒打算大时代撒打算大<cursor /></p>",
    "public": 1,
    "status": 1,
    "view_status": 0,
    "read_status": 1,
    "likes_count": 0,
    "comments_count": 0,
    "content_updated_at": "2021-02-26T16:10:36.000Z",
    "deleted_at": null,
    "created_at": "2021-02-26T16:05:19.000Z",
    "updated_at": "2021-02-26T16:10:37.000Z",
    "published_at": "2021-02-26T16:10:36.000Z",
    "first_published_at": "2021-02-26T16:10:36.000Z",
    "word_count": 18,
    "cover": "",
    "description": null,
    "custom_description": "tags: [Hexo]categories: 教程date: 2018-10-05 10:43:50撒打算大时代撒打算大",
    "hits": 0,
    "_serializer": "v2.doc_detail"
  }
]